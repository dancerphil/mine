(this.webpackJsonpmine=this.webpackJsonpmine||[]).push([[0],{10:function(e,n,t){e.exports={block:"Block_block__Gscjm"}},16:function(e,n,t){e.exports={castRange:"CastRange_castRange__1OIwm"}},21:function(e,n,t){},30:function(e,n,t){"use strict";t.r(n);for(var r=t(1),a=t(14),o=t.n(a),c=(t(21),t(2)),l=t(12),i=window.innerWidth,u=window.innerHeight,m=Math.floor(i/20),f=Math.floor(.95*u/m),s=20*f,v=Math.floor(.2*s),d={width:20*m,height:f*m},b={width:m,height:m},h={width:3*m,height:3*m},_=[],y=0;y<f;y++)for(var j=0;j<20;j++)_.push({x:j,y:y});var p=function(e){e.mark=!0},x=function e(n){if(!n.reveal){if(n.reveal=!0,n.mine)throw L().forEach((function(e){e.reveal=!0})),new Error("\u5931\u8d25");0===n.label&&M(n).forEach(e)}},O=function(e){var n=e.mark,t=e.reveal;n&&n.forEach(p),t&&t.forEach(x)},E=function(e){var n=M(e);return Object(c.sumBy)(n,(function(e){return e.reveal?0:1}))===e.label?{mark:n.filter((function(e){return!e.reveal}))}:Object(c.sumBy)(n,(function(e){return e.mark?1:0}))===e.label?{reveal:n.filter((function(e){return!e.mark}))}:{}},k=Object(l.a)(),T=k.getValue,g=k.useValue,w=k.set,L=function(){return Object(c.compact)(_.map(T))},M=function(e){var n=e.x,t=e.y,r=[T({x:n-1,y:t-1}),T({x:n-1,y:t}),T({x:n-1,y:t+1}),T({x:n,y:t-1}),T({x:n,y:t+1}),T({x:n+1,y:t-1}),T({x:n+1,y:t}),T({x:n+1,y:t+1})];return Object(c.compact)(r)};_.forEach((function(e){var n=e.x,t=e.y;w({x:n,y:t},{x:n,y:t,mine:!1,reveal:!1,mark:!1,label:0})}));var Y=t(32),B=Object(Y.a)(0),N=function(){return B.set((function(e){return e+1}))},X=B.useValue;window.addEventListener("resize",N);var R=t(4),C=t(9),V=t.n(C),A=t(10),D=t.n(A),F=t(5),Q=t.n(F),S=t(0),U=function(e){var n,t=e.coordinate,r=g(t);if(!r)return null;var a=r.mine,o=r.reveal,c=r.mark,l=r.label;if(!o){var i=V()(D.a.block,Q.a.cover,Object(R.a)({},Q.a.mark,c));return Object(S.jsx)("div",{className:i,style:b,children:c&&"m"})}var u=V()(D.a.block,Q.a.reveal,(n={},Object(R.a)(n,Q.a["label".concat(l)],!a),Object(R.a)(n,Q.a.mine,a),n));return Object(S.jsx)("div",{className:u,style:b,children:a?"!":l})},z=t(7),G=t.n(z),I=!1,J=function(){L().forEach((function(e){e.reveal=!1,e.mark=!1})),I=!1,N()};J();var W=function(){L().forEach((function(e){e.mine=!1}));for(var e=0;e<v;){var n=Math.floor(20*Math.random()),t=Math.floor(Math.random()*f),r=T({x:n,y:t});r.mine||(r.mine=!0,e++)}L().forEach((function(e){var n=M(e);e.label=Object(c.sumBy)(n,"mine")}))},H=function(e){var n=E(e);O(n)},K=function(e){var n=T(e);if(n){I||(!function(e){for(var n=0;n<100;n++)if(W(),!e.mine&&0===e.label)return}(n),I=!0),n.reveal||x(n),H(n);var t=function(e){return{mark:Object(c.compact)(e.map((function(e){return e.mark}))).flat(),reveal:Object(c.compact)(e.map((function(e){return e.reveal}))).flat()}}(M(n).filter((function(e){return e.reveal})).map(E));O(t)}},q=function(e){try{K(e)}catch(n){console.error(n)}finally{N()}},P=Object(Y.a)(),Z=P.useValue,$=function(e){P.set((function(n){return n&&n.x===e.x&&n.y===e.y?n:e}))},ee=P.reset,ne=function(e,n,t){var r=e.getBoundingClientRect(),a=n-r.left+e.scrollLeft,o=t-r.top+e.scrollTop;return{x:Math.floor(a/m),y:Math.floor(o/m)}},te=function(e){return function(n){n.preventDefault();var t=n.changedTouches[0].clientX,r=n.changedTouches[0].clientY;e({clientX:t,clientY:r})}},re=function(e){return function(n){if(n.buttons){var t=n.clientX,r=n.clientY;e({clientX:t,clientY:r})}}},ae=function(e){return Object(r.useEffect)((function(){var n=e.current;if(n){var t=function(e){var t=e.clientX,r=e.clientY,a=ne(n,t,r);$(a)},r=te(t),a=re(t),o=function(e){var t=e.clientX,r=e.clientY,a=ne(n,t,r);$(a),q(a)},c=te(o),l=re(o),i=function(e){var t=e.clientX,r=e.clientY,a=ne(n,t,r);q(a),ee()},u=te(i),m=re(i);return document.body.addEventListener("touchstart",r),document.body.addEventListener("mousedown",a),document.body.addEventListener("touchmove",c,{passive:!1}),document.body.addEventListener("mousemove",l),document.body.addEventListener("touchend",u),document.body.addEventListener("mouseup",m),function(){document.body.removeEventListener("touchstart",r),document.body.removeEventListener("mousedown",a),document.body.removeEventListener("touchmove",c),document.body.removeEventListener("mousemove",l),document.body.removeEventListener("touchend",u),document.body.removeEventListener("mouseup",m)}}}),[e]),e},oe=t(11),ce=t(16),le=t.n(ce);function ie(){var e=Z();if(!e)return null;var n=e.x,t=e.y;return Object(S.jsx)("div",{className:le.a.castRange,style:Object(oe.a)(Object(oe.a)({},h),{},{left:(n-1)*m,top:(t-1)*m})})}var ue=Object(r.memo)(ie),me=function(){X();var e=Object(r.useRef)(null);ae(e);var n=L();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:G.a.header,onMouseUp:J,onTouchEnd:J,children:n.filter((function(e){return e.mine&&!e.mark})).length}),Object(S.jsx)("div",{className:G.a.content,children:Object(S.jsxs)("div",{className:G.a.panel,style:d,ref:e,children:[_.map((function(e){return Object(S.jsx)(U,{coordinate:e},"".concat(e.x,"-").concat(e.y))})),Object(S.jsx)(ue,{})]})})]})};o.a.render(Object(S.jsx)(me,{}),document.getElementById("root"))},5:function(e,n,t){e.exports={cover:"Theme2_cover__36ss5",reveal:"Theme2_reveal__39mE5",mine:"Theme2_mine__14msQ",mark:"Theme2_mark__6iF2h",label0:"Theme2_label0__2jGEp",label1:"Theme2_label1__2hOCp",label2:"Theme2_label2__r3UQk",label3:"Theme2_label3__mbS-v",label4:"Theme2_label4__18SBo",label5:"Theme2_label5__FTOCM",label6:"Theme2_label6__l5Y_m",label7:"Theme2_label7__2iKDS",label8:"Theme2_label8__1UzQN"}},7:function(e,n,t){e.exports={content:"App_content__1dlDM",panel:"App_panel__2es-6",header:"App_header__14Wxn"}}},[[30,1,2]]]);
//# sourceMappingURL=main.27192ada.chunk.js.map