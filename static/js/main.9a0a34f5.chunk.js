(this.webpackJsonpmine=this.webpackJsonpmine||[]).push([[0],{10:function(e,n,t){e.exports={block:"Block_block__Gscjm"}},19:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);for(var r=t(1),a=t(12),o=t.n(a),c=(t(19),t(2)),l=t(11),i=window.outerWidth,u=window.outerHeight,m=Math.floor(i/20),f=Math.floor(.95*u/m),s=20*f,v=Math.floor(.2*s),h={width:20*m,height:f*m},b={width:m,height:m},d=[],_=0;_<f;_++)for(var y=0;y<20;y++)d.push({x:y,y:_});var p=function(e){e.mark=!0},j=function e(n){if(!n.reveal){if(n.reveal=!0,n.mine)throw g().forEach((function(e){e.reveal=!0})),new Error("\u5931\u8d25");0===n.label&&M(n).forEach(e)}},x=function(e){var n=e.mark,t=e.reveal;n&&n.forEach(p),t&&t.forEach(j)},E=function(e){var n=M(e);return Object(c.sumBy)(n,(function(e){return e.reveal?0:1}))===e.label?{mark:n.filter((function(e){return!e.reveal}))}:Object(c.sumBy)(n,(function(e){return e.mark?1:0}))===e.label?{reveal:n.filter((function(e){return!e.mark}))}:{}},O=Object(l.a)(),k=O.getValue,T=O.useValue,w=O.set,g=function(){return Object(c.compact)(d.map(k))},M=function(e){var n=e.x,t=e.y,r=[k({x:n-1,y:t-1}),k({x:n-1,y:t}),k({x:n-1,y:t+1}),k({x:n,y:t-1}),k({x:n,y:t+1}),k({x:n+1,y:t-1}),k({x:n+1,y:t}),k({x:n+1,y:t+1})];return Object(c.compact)(r)},L=t(30),B=Object(L.a)(0),N=function(){return B.set((function(e){return e+1}))},A=B.useValue;window.addEventListener("resize",N);var C=t(6),D=t(9),F=t.n(D),Q=t(10),S=t.n(Q),V=t(4),Y=t.n(V),z=t(0),G=function(e){var n,t=e.coordinate,r=T(t);if(!r)return null;var a=r.mine,o=r.reveal,c=r.mark,l=r.label;if(!o){var i=F()(S.a.block,Y.a.cover,Object(C.a)({},Y.a.mark,c));return Object(z.jsx)("div",{className:i,style:b,children:c&&"m"})}var u=F()(S.a.block,Y.a.reveal,(n={},Object(C.a)(n,Y.a["label".concat(l)],!a),Object(C.a)(n,Y.a.mine,a),n));return Object(z.jsx)("div",{className:u,style:b,children:a?"!":l})},J=t(7),R=t.n(J),U=!1,W=function(){d.forEach((function(e){var n=e.x,t=e.y;w({x:n,y:t},{x:n,y:t,mine:!1,reveal:!1,mark:!1,label:0})})),U=!1,N()};W();var X=function(){g().forEach((function(e){e.mine=!1}));for(var e=0;e<v;){var n=Math.floor(20*Math.random()),t=Math.floor(Math.random()*f),r=k({x:n,y:t});r.mine||(r.mine=!0,e++)}g().forEach((function(e){var n=M(e);e.label=Object(c.sumBy)(n,"mine")}))},H=function(e){var n=E(e);x(n),M(e).filter((function(e){return e.reveal})).map(E).forEach(x)},I=function(e){var n=k(e);n&&(U||(!function(e){for(var n=0;n<100;n++)if(X(),!e.mine&&0===e.label)return}(n),U=!0),n.reveal||j(n),H(n))},K=function(e){try{I(e)}catch(n){console.error(n)}finally{N()}};function q(e,n,t){var r=e.getBoundingClientRect(),a=n-r.left+e.scrollLeft,o=t-r.top+e.scrollTop;return{x:Math.floor(a/m),y:Math.floor(o/m)}}var P=function(e){return Object(r.useEffect)((function(){var n=e.current;if(n){var t=function(e){e.preventDefault();var t=q(n,e.changedTouches[0].clientX,e.changedTouches[0].clientY);K(t)},r=function(e){if(e.buttons){var t=q(n,e.clientX,e.clientY);K(t)}};return document.body.addEventListener("touchmove",t,{passive:!1}),document.body.addEventListener("touchend",t),document.body.addEventListener("mousemove",r),document.body.addEventListener("mouseup",r),function(){document.body.removeEventListener("touchmove",t),document.body.removeEventListener("touchend",t),document.body.removeEventListener("mousemove",r),document.body.removeEventListener("mouseup",r)}}}),[e]),e},Z=function(){A();var e=Object(r.useRef)(null);P(e);var n=g();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:R.a.header,onTouchEnd:W,children:n.filter((function(e){return e.mine&&!e.mark})).length}),Object(z.jsx)("div",{className:R.a.content,children:Object(z.jsx)("div",{className:R.a.panel,style:h,ref:e,children:d.map((function(e){return Object(z.jsx)(G,{coordinate:e},"".concat(e.x,"-").concat(e.y))}))})})]})};o.a.render(Object(z.jsx)(Z,{}),document.getElementById("root"))},4:function(e,n,t){e.exports={cover:"Theme2_cover__36ss5",reveal:"Theme2_reveal__39mE5",mine:"Theme2_mine__14msQ",mark:"Theme2_mark__6iF2h",label0:"Theme2_label0__2jGEp",label1:"Theme2_label1__2hOCp",label2:"Theme2_label2__r3UQk",label3:"Theme2_label3__mbS-v",label4:"Theme2_label4__18SBo",label5:"Theme2_label5__FTOCM",label6:"Theme2_label6__l5Y_m",label7:"Theme2_label7__2iKDS",label8:"Theme2_label8__1UzQN"}},7:function(e,n,t){e.exports={content:"App_content__1dlDM",panel:"App_panel__2es-6",header:"App_header__14Wxn"}}},[[28,1,2]]]);
//# sourceMappingURL=main.9a0a34f5.chunk.js.map